import{E as v,a as C}from"./el-table.42f09df0.js";import{e as k,d as B,E as T}from"./index.02c2e2c9.js";import{E as $}from"./el-button.05de3bc9.js";import{_ as D}from"./nuxt-link.e91b0c56.js";import{a as I,_ as N}from"./layout.ba9fe5d1.js";import"./base.aaa84ba8.js";import"./el-checkbox.45ac3761.js";import"./el-scrollbar.82b407f2.js";/* empty css                */import"./el-tooltip.4ed993c7.js";import"./el-popper.3bd3cc02.js";import{E as P}from"./el-overlay.c430b81c.js";import"./el-input.57265631.js";import{E as f}from"./el-message.502574fd.js";import{u as S}from"./cookie.cb60d160.js";import{p as z,r as A,s as M,o as V,c as K,e,f as t,u as c,h as i,t as m}from"./entry.7f028a03.js";import{n as L}from"./notify.b29046f8.js";import"./fetch.024312f3.js";import{c as O}from"./fetch-data.87f96ffe.js";import{u as U}from"./partnerStore.b7f43263.js";import"./aria.3c6403e5.js";import"./_Uint8Array.3e70d465.js";import"./_initCloneObject.8b35669d.js";import"./el-card.323a09ac.js";import"./event.9519ab40.js";import"./vnode.92901b7f.js";import"./validator.b5fefb33.js";import"./typescript.defaf979.js";import"./el-notification.663e6eba.js";import"./api.config.679aa266.js";const j={style:{display:"flex","align-items":"center"}},q={style:{display:"flex","align-items":"center"}},F={style:{display:"flex","align-items":"center"}},G={style:{display:"flex","align-items":"center"}},Ct=z({__name:"index",async setup(H){let s,p;const l=A([]),y=S("accessToken"),_=([s,p]=M(()=>O(y.value)),s=await s,p(),s),w=U();_.users?l.value=_.users:L({message:_.error});const x=async a=>{try{await P.confirm("Уверены, что хотите удалить пользователя?","Внимание!",{cancelButtonText:"Отмена",confirmButtonText:"OK",type:"warning"});try{await w.deletePartner(a),l.value=l.value.filter(n=>n.id!==a),f({type:"success",message:`Пользователь с ID ${a} удалён`})}catch{f({type:"error",message:`При удалении пользователя с ID ${a}  возникла ошибка`})}}catch{console.log("Удаление отменено")}};return(a,n)=>{const r=v,d=T,u=$,h=D,g=C,E=I,b=N;return V(),K(b,null,{default:e(()=>[t(E,{title:"Пользователи"},{default:e(()=>[t(g,{data:c(l),style:{width:"100%"}},{default:e(()=>[t(r,{label:"Имя",width:"300"},{default:e(o=>[i("div",j,m(o.row.name),1)]),_:1}),t(r,{label:"Email",width:"250"},{default:e(o=>[i("div",q,m(o.row.email),1)]),_:1}),t(r,{label:"Роль",width:"100"},{default:e(o=>[i("div",F,m(o.row.role),1)]),_:1}),t(r,{label:"Промокод"},{default:e(o=>[i("div",G,m(o.row.promocode),1)]),_:1}),t(r,{label:"Управление",width:"130"},{default:e(o=>[t(h,{to:`/admin/users/${o.row.id}`},{default:e(()=>[t(u,{size:"small"},{default:e(()=>[t(d,null,{default:e(()=>[t(c(k))]),_:1})]),_:1})]),_:2},1032,["to"]),t(u,{class:"deleteProductBtn",size:"small",type:"danger",onClick:J=>x(o.row.id)},{default:e(()=>[t(d,null,{default:e(()=>[t(c(B))]),_:1})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})}}});export{Ct as default};
