import{y as le,i as W,z as ie}from"./el-button.4b28c0d2.js";import{t as ce,a as $,b as ue}from"./aria.e146d83a.js";import{p as A,L as fe,A as ae,r as v,a as x,Q as me,S as U,o as N,c as D,e as ne,a4 as de,h as X,D as M,u as b,E as Y,a5 as ve,a6 as pe,k as se,f as K,F as he,w as V,Y as G,R as ge,v as ye,b as be,ac as Se,G as we,H as Ee,m as Te,O as ze}from"./entry.18e2495c.js";import{b as F,t as re,a as ke,n as B,r as q,D as _e}from"./index.4edc3df1.js";import{_ as j,w as xe}from"./base.2bb6cb54.js";var He=/\s/;function Ce(e){for(var a=e.length;a--&&He.test(e.charAt(a)););return a}var Re=/^\s+/;function Le(e){return e&&e.slice(0,Ce(e)+1).replace(Re,"")}var Q=0/0,Be=/^[-+]0x[0-9a-f]+$/i,Ne=/^0b[01]+$/i,Me=/^0o[0-7]+$/i,Pe=parseInt;function J(e){if(typeof e=="number")return e;if(le(e))return Q;if(W(e)){var a=typeof e.valueOf=="function"?e.valueOf():e;e=W(a)?a+"":a}if(typeof e!="string")return e===0?e:+e;e=Le(e);var s=Ne.test(e);return s||Me.test(e)?Pe(e.slice(2),s?2:8):Be.test(e)?Q:+e}var Oe=function(){return ie.Date.now()};const I=Oe;var Ae="Expected a function",Ie=Math.max,We=Math.min;function rt(e,a,s){var r,c,f,i,u,o,d=0,p=!1,l=!1,h=!0;if(typeof e!="function")throw new TypeError(Ae);a=J(a)||0,W(s)&&(p=!!s.leading,l="maxWait"in s,f=l?Ie(J(s.maxWait)||0,a):f,h="trailing"in s?!!s.trailing:h);function g(n){var t=r,m=c;return r=c=void 0,d=n,i=e.apply(m,t),i}function S(n){return d=n,u=setTimeout(w,a),p?g(n):i}function H(n){var t=n-o,m=n-d,y=a-t;return l?We(y,f-m):y}function k(n){var t=n-o,m=n-d;return o===void 0||t>=a||t<0||l&&m>=f}function w(){var n=I();if(k(n))return E(n);u=setTimeout(w,H(n))}function E(n){return u=void 0,h&&r?g(n):(r=c=void 0,i)}function C(){u!==void 0&&clearTimeout(u),d=0,r=o=c=u=void 0}function R(){return u===void 0?i:E(I())}function T(){var n=I(),t=k(n);if(r=arguments,c=this,o=n,t){if(u===void 0)return S(o);if(l)return clearTimeout(u),u=setTimeout(w,a),g(o)}return u===void 0&&(u=setTimeout(w,a)),i}return T.cancel=C,T.flush=R,T}const _=4,$e={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},De=({move:e,size:a,bar:s})=>({[s.size]:a,transform:`translate${s.axis}(${e}%)`}),oe=Symbol("scrollbarContextKey"),Xe=F({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Ye="Thumb",Fe=A({__name:"thumb",props:Xe,setup(e){const a=e,s=fe(oe),r=ae("scrollbar");s||ce(Ye,"can not inject scrollbar context");const c=v(),f=v(),i=v({}),u=v(!1);let o=!1,d=!1,p=re?document.onselectstart:null;const l=x(()=>$e[a.vertical?"vertical":"horizontal"]),h=x(()=>De({size:a.size,move:a.move,bar:l.value})),g=x(()=>c.value[l.value.offset]**2/s.wrapElement[l.value.scrollSize]/a.ratio/f.value[l.value.offset]),S=n=>{var t;if(n.stopPropagation(),n.ctrlKey||[1,2].includes(n.button))return;(t=window.getSelection())==null||t.removeAllRanges(),k(n);const m=n.currentTarget;m&&(i.value[l.value.axis]=m[l.value.offset]-(n[l.value.client]-m.getBoundingClientRect()[l.value.direction]))},H=n=>{if(!f.value||!c.value||!s.wrapElement)return;const t=Math.abs(n.target.getBoundingClientRect()[l.value.direction]-n[l.value.client]),m=f.value[l.value.offset]/2,y=(t-m)*100*g.value/c.value[l.value.offset];s.wrapElement[l.value.scroll]=y*s.wrapElement[l.value.scrollSize]/100},k=n=>{n.stopImmediatePropagation(),o=!0,document.addEventListener("mousemove",w),document.addEventListener("mouseup",E),p=document.onselectstart,document.onselectstart=()=>!1},w=n=>{if(!c.value||!f.value||o===!1)return;const t=i.value[l.value.axis];if(!t)return;const m=(c.value.getBoundingClientRect()[l.value.direction]-n[l.value.client])*-1,y=f.value[l.value.offset]-t,L=(m-y)*100*g.value/c.value[l.value.offset];s.wrapElement[l.value.scroll]=L*s.wrapElement[l.value.scrollSize]/100},E=()=>{o=!1,i.value[l.value.axis]=0,document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",E),T(),d&&(u.value=!1)},C=()=>{d=!1,u.value=!!a.size},R=()=>{d=!0,u.value=o};me(()=>{T(),document.removeEventListener("mouseup",E)});const T=()=>{document.onselectstart!==p&&(document.onselectstart=p)};return $(U(s,"scrollbarElement"),"mousemove",C),$(U(s,"scrollbarElement"),"mouseleave",R),(n,t)=>(N(),D(pe,{name:b(r).b("fade"),persisted:""},{default:ne(()=>[de(X("div",{ref_key:"instance",ref:c,class:M([b(r).e("bar"),b(r).is(b(l).key)]),onMousedown:H},[X("div",{ref_key:"thumb",ref:f,class:M(b(r).e("thumb")),style:Y(b(h)),onMousedown:S},null,38)],34),[[ve,n.always||u.value]])]),_:1},8,["name"]))}});var Z=j(Fe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const je=F({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Ue=A({__name:"bar",props:je,setup(e,{expose:a}){const s=e,r=v(0),c=v(0);return a({handleScroll:i=>{if(i){const u=i.offsetHeight-_,o=i.offsetWidth-_;c.value=i.scrollTop*100/u*s.ratioY,r.value=i.scrollLeft*100/o*s.ratioX}}}),(i,u)=>(N(),se(he,null,[K(Z,{move:r.value,ratio:i.ratioX,size:i.width,always:i.always},null,8,["move","ratio","size","always"]),K(Z,{move:c.value,ratio:i.ratioY,size:i.height,vertical:"",always:i.always},null,8,["move","ratio","size","always"])],64))}});var Ke=j(Ue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Ve=F({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ke([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Ge={scroll:({scrollTop:e,scrollLeft:a})=>[e,a].every(B)},qe="ElScrollbar",Qe=A({name:qe}),Je=A({...Qe,props:Ve,emits:Ge,setup(e,{expose:a,emit:s}){const r=e,c=ae("scrollbar");let f,i;const u=v(),o=v(),d=v(),p=v("0"),l=v("0"),h=v(),g=v(1),S=v(1),H=x(()=>{const t={};return r.height&&(t.height=q(r.height)),r.maxHeight&&(t.maxHeight=q(r.maxHeight)),[r.wrapStyle,t]}),k=x(()=>[r.wrapClass,c.e("wrap"),{[c.em("wrap","hidden-default")]:!r.native}]),w=x(()=>[c.e("view"),r.viewClass]),E=()=>{var t;o.value&&((t=h.value)==null||t.handleScroll(o.value),s("scroll",{scrollTop:o.value.scrollTop,scrollLeft:o.value.scrollLeft}))};function C(t,m){ze(t)?o.value.scrollTo(t):B(t)&&B(m)&&o.value.scrollTo(t,m)}const R=t=>{B(t)&&(o.value.scrollTop=t)},T=t=>{B(t)&&(o.value.scrollLeft=t)},n=()=>{if(!o.value)return;const t=o.value.offsetHeight-_,m=o.value.offsetWidth-_,y=t**2/o.value.scrollHeight,L=m**2/o.value.scrollWidth,P=Math.max(y,r.minSize),O=Math.max(L,r.minSize);g.value=y/(t-y)/(P/(t-P)),S.value=L/(m-L)/(O/(m-O)),l.value=P+_<t?`${P}px`:"",p.value=O+_<m?`${O}px`:""};return V(()=>r.noresize,t=>{t?(f==null||f(),i==null||i()):({stop:f}=ue(d,n),i=$("resize",n))},{immediate:!0}),V(()=>[r.maxHeight,r.height],()=>{r.native||G(()=>{var t;n(),o.value&&((t=h.value)==null||t.handleScroll(o.value))})}),ge(oe,ye({scrollbarElement:u,wrapElement:o})),be(()=>{r.native||G(()=>{n()})}),Se(()=>n()),a({wrapRef:o,update:n,scrollTo:C,setScrollTop:R,setScrollLeft:T,handleScroll:E}),(t,m)=>(N(),se("div",{ref_key:"scrollbarRef",ref:u,class:M(b(c).b())},[X("div",{ref_key:"wrapRef",ref:o,class:M(b(k)),style:Y(b(H)),onScroll:E},[(N(),D(Ee(t.tag),{ref_key:"resizeRef",ref:d,class:M(b(w)),style:Y(t.viewStyle)},{default:ne(()=>[we(t.$slots,"default")]),_:3},8,["class","style"]))],38),t.native?Te("v-if",!0):(N(),D(Ke,{key:0,ref_key:"barRef",ref:h,height:l.value,width:p.value,always:t.always,"ratio-x":S.value,"ratio-y":g.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Ze=j(Je,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const ot=xe(Ze),z=new Map;let ee;re&&(document.addEventListener("mousedown",e=>ee=e),document.addEventListener("mouseup",e=>{for(const a of z.values())for(const{documentHandler:s}of a)s(e,ee)}));function te(e,a){let s=[];return Array.isArray(a.arg)?s=a.arg:_e(a.arg)&&s.push(a.arg),function(r,c){const f=a.instance.popperRef,i=r.target,u=c==null?void 0:c.target,o=!a||!a.instance,d=!i||!u,p=e.contains(i)||e.contains(u),l=e===i,h=s.length&&s.some(S=>S==null?void 0:S.contains(i))||s.length&&s.includes(u),g=f&&(f.contains(i)||f.contains(u));o||d||p||l||h||g||a.value(r,c)}}const lt={beforeMount(e,a){z.has(e)||z.set(e,[]),z.get(e).push({documentHandler:te(e,a),bindingFn:a.value})},updated(e,a){z.has(e)||z.set(e,[]);const s=z.get(e),r=s.findIndex(f=>f.bindingFn===a.oldValue),c={documentHandler:te(e,a),bindingFn:a.value};r>=0?s.splice(r,1,c):s.push(c)},unmounted(e){z.delete(e)}};export{lt as C,ot as E,rt as d};
